<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dummy Variables Creation — step_dummy • recipes</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">recipes</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/1_Simple_Example.html">Simple Example</a>
</li>
<li>
  <a href="../articles/2_Selecting_Variables.html">Selecting Variables</a>
</li>
<li>
  <a href="../articles/3_Custom_Steps.html">Custom Steps</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/recipes">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Dummy Variables Creation</h1>
    </div>

    
    <p><code>step_dummy</code> creates a a <em>specification</em> of a recipe step that will convert nominal data (e.g. character or factors) into one or more numeric binary model terms for the levels of the original data.</p>
    

    <pre><span class='fu'>step_dummy</span>(<span class='no'>recipe</span>, <span class='no'>...</span>, <span class='kw'>role</span> <span class='kw'>=</span> <span class='st'>"predictor"</span>, <span class='kw'>trained</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>contrast</span> <span class='kw'>=</span> <span class='fu'>options</span>(<span class='st'>"contrasts"</span>), <span class='kw'>naming</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>var</span>, <span class='no'>lvl</span>) <span class='fu'>paste</span>(<span class='no'>var</span>,
  <span class='fu'>make.names</span>(<span class='no'>lvl</span>), <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"_"</span>), <span class='kw'>levels</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <dl class="dl-horizontal">
      <dt>recipe</dt>
      <dd><p>A recipe object. The step will be added to the sequence of operations for this recipe.</p></dd>
      <dt>...</dt>
      <dd><p>One or more selector functions to choose which variables will be used to create the dummy variables. See <code><a href='selections.html'>selections</a></code> for more details.</p></dd>
      <dt>role</dt>
      <dd><p>For model terms created by this step, what analysis role should they be assigned?. By default, the function assumes that the binary dummy variable columns created by the original variables will be used as all_predictors in a model.</p></dd>
      <dt>trained</dt>
      <dd><p>A logical to indicate if the quantities for preprocessing have been estimated.</p></dd>
      <dt>contrast</dt>
      <dd><p>A specification for which type of contrast should be used to make a set of full rank dummy variables. See <code><a href='http://www.rdocumentation.org/packages/stats/topics/contrasts'>contrasts</a></code> for more details. <b>not currently working</b></p></dd>
      <dt>naming</dt>
      <dd><p>A function that defines the naming convention for new binary columns. See Details below.</p></dd>
      <dt>levels</dt>
      <dd><p>A list that contains the information needed to create dummy variables for each variable contained in <code>terms</code>. This is <code>NULL</code> until the step is trained by <code><a href='learn.html'>learn.recipe</a></code>.</p></dd>
    </dl>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>step_dummy</code> returns an object of class <code>step_dummy</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>step_dummy</code> will create a set of binary dummy variables from a factor variable. For example, if a factor column in the data set has levels of "red", "green", "blue", the dummy variable process will create two additional columns of 0/1 data for two of those three values (and remove the original column).</p>
<p>By default, the missing dummy variable will correspond to the first level of the factor being converted.</p>
<p>The function allows for non-standard naming of the resulting variables. For a factor named <code>x</code>, with levels <code>"a"</code> and <code>"b"</code>, the default naming convention would be to create a new variable called <code>x_b</code>. Note that if the factor levels are not valid variable names (e.g. "some text with spaces"), it will be changed by <code><a href='http://www.rdocumentation.org/packages/base/topics/make.names'>make.names</a></code> to be valid (see the example below). The naming format can be changed using the <code>naming</code> argument.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>data</span>(<span class='no'>okc</span>)
<span class='no'>okc</span> <span class='kw'>&lt;-</span> <span class='no'>okc</span>[<span class='fu'>complete.cases</span>(<span class='no'>okc</span>),]

<span class='no'>rec</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='recipe.html'>recipe</a></span>(~ <span class='no'>diet</span> + <span class='no'>age</span> + <span class='no'>height</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>okc</span>)

<span class='no'>dummies</span> <span class='kw'>&lt;-</span> <span class='no'>rec</span> <span class='kw'>%&gt;%</span> <span class='fu'>step_dummy</span>(<span class='no'>diet</span>)
<span class='no'>dummies</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='learn.html'>learn</a></span>(<span class='no'>dummies</span>, <span class='kw'>training</span> <span class='kw'>=</span> <span class='no'>okc</span>)</div><div class='output co'>#&gt; step 1 dummy training </div><div class='output co'>#&gt; <span class='error'>Error in x$variable: $ operator is invalid for atomic vectors</span></div><div class='input'>
<span class='no'>dummy_data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='process.html'>process</a></span>(<span class='no'>dummies</span>, <span class='kw'>newdata</span> <span class='kw'>=</span> <span class='no'>okc</span>)

<span class='fu'>unique</span>(<span class='no'>okc</span>$<span class='no'>diet</span>)</div><div class='output co'>#&gt;  [1] "strictly anything"   "mostly other"        "anything"           
#&gt;  [4] "vegetarian"          "mostly anything"     "mostly vegetarian"  
#&gt;  [7] "strictly vegan"      "strictly vegetarian" "mostly vegan"       
#&gt; [10] "strictly other"      "mostly halal"        "other"              
#&gt; [13] "vegan"               "mostly kosher"       "strictly halal"     
#&gt; [16] "halal"               "strictly kosher"     "kosher"             </div><div class='input'><span class='fu'>grep</span>(<span class='st'>"^diet"</span>, <span class='fu'>names</span>(<span class='no'>dummy_data</span>), <span class='kw'>value</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; [1] "diet"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
