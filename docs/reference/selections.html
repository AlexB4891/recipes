<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Methods for Select Variables in Step Functions — selections • recipes</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">recipes</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/Simple_Example.html">Simple Example</a>
</li>
<li>
  <a href="../articles/Selecting_Variables.html">Selecting Variables</a>
</li>
<li>
  <a href="../articles/Custom_Steps.html">Custom Steps</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/recipes">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Methods for Select Variables in Step Functions</h1>
    </div>

    
    <p>When selecting variables or model terms in <code>step</code> functions, <code>dplyr</code>-like tools are used. The <em>selector</em> functions can choose variables based on their name, current role, data type, or any combination of these. The selectors are passed as any other argument to the step. If the variables are explicitly stated in the step function, this might be similar to:</p><pre>
  recipe( ~ ., data = USArrests) %&gt;%
    step_pca(Murder, Assault, UrbanPop, Rape, num = 3)
</pre>

    <p>The first four arguments indicate which variables should be used in the PCA while the last argument is a specific argument to  <code><a href='step_pca.html'>step_pca</a></code>.</p>
<p>Note that:</p>
<p></p><ol>
<li><p>The selector arguments should not contain functions beyond those supported (see below).</p></li>
<li><p>These arguments are not processed until the <code>learn</code> function for the step is executed.</p></li>
<li><p>The <code>dplyr</code>-like syntax allows for negative sings to exclude variables (e.g. <code>-Murder</code>) and the set of selectors will processed in order.</p></li>
<li><p>A leading exclusion in these arguments (e.g. <code>-Murder</code>) has the effect of adding all variables to the list except the excluded variable(s).</p></li>
</ol>

    <p>Also, select helpers from the <code>dplyr</code> package can also be used: <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>starts_with</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>ends_with</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>contains</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>matches</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>num_range</a></code>, and <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>everything</a></code>. For example:</p><pre>
  recipe(Species ~ ., data = iris) %&gt;%
    step_center(starts_with("Sepal"), -contains("Width"))
</pre>

    <p>would only select <code>Sepal.Length</code>

    <b>Inline</b> functions that specify computations, such as <code>log(x)</code>, should not be used in selectors and will produce an error. A list of allowed selector functions is below.</p>
<p>Columns of the design matrix that may not exist when the step is coded can also be selected. For example, when using <code>step_pca</code>, the number of columns created by feature extraction may not be known when subsequent steps are defined. In this case, using <code>matches("^PC")</code> will select all of the columns whose names start with "PC" <em>once those columns are created</em>.</p>
<p>There are sets of functions that can be used to select variables based on their role or type: <code><a href='has_role.html'>has_role</a></code> and <code><a href='has_role.html'>has_type</a></code>. For convenience, there are also functions that are more specific: <code><a href='has_role.html'>all_numeric</a></code>, <code><a href='has_role.html'>all_nominal</a></code>, <code><a href='has_role.html'>all_predictors</a></code>, and <code><a href='has_role.html'>all_outcomes</a></code>. These can be used in conjunction with the previous functions described for selecting variables using their names:</p><pre>
  data(biomass)
  recipe(HHV ~ ., data = biomass) %&gt;%
    step_center(all_numeric(), -all_outcomes())
</pre>

    <p>This results in all the numeric predictors: carbon, hydrogen, oxygen, nitrogen, and sulfur.</p>
<p>If a role for a variable has not been defined, it will never be selected using role-specific selectors.</p>
<p>All steps use these techniques to define variables for steps <em>except one</em>: <code><a href='step_interact.html'>step_interact</a></code> requires traditional model formula representations of the interactions and takes a single formula as the argument to select the variables.</p>
<p>The complete list of allowable functions in steps:</p>
<p></p><ul>
<li><p><b>By name</b>: <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>starts_with</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>ends_with</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>contains</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>matches</a></code>, <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>num_range</a></code>, and <code><a href='http://www.rdocumentation.org/packages/dplyr/topics/select_helpers'>everything</a></code></p></li>
<li><p><b>By role</b>: <code><a href='has_role.html'>has_role</a></code>, <code><a href='has_role.html'>all_predictors</a></code>, and <code><a href='has_role.html'>all_outcomes</a></code></p></li>
<li><p><b>By type</b>: <code><a href='has_role.html'>has_type</a></code>, <code><a href='has_role.html'>all_numeric</a></code>, and <code><a href='has_role.html'>all_nominal</a></code></p></li>
</ul>
    

        

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
                </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
